<div class="container p-4">
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-md-12 mb-5">
                    <h3>Ubicaciones de {{name}}</h3>
                </div>
                <div class="col-md-12">
                    <div id="map"></div>

                    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
                    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfhTHyaCn2bXEKvT13E0YEutlQY1bmfoM&callback=initMap&libraries=&v=weekly" defer></script>
                    <style type="text/css">
                        /* Always set the map height explicitly to define the size of the div
                        * element that contains the map. */
                        #map {
                            height: 450px;
                        }
                    </style>
                    <script>
                        var map, infoWindow, position;
                        var currentLocation = { lat: -14.835473, lng: -64.904180 };
                        function initMap() {
                            map = new google.maps.Map(document.getElementById("map"), {
                                center: currentLocation,
                                zoom: 13,
                            });

                            {{#each locations}}
                                position = { lat: {{latitude}}, lng: {{longitude}} }
                                new google.maps.Marker({
                                    position,
                                    map: map,
                                });
                            {{/each}}
                        }

                        function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                            infoWindow.setPosition(pos);
                            infoWindow.setContent(
                                browserHasGeolocation
                                ? "Error: The Geolocation service failed."
                                : "Error: Your browser doesn't support geolocation."
                            );
                            infoWindow.open(map);
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>